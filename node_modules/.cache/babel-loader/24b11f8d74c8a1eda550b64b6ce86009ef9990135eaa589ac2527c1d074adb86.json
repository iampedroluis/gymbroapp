{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nconst useCompletedExercises = () => {\n  _s();\n  const [completedExercises, setCompletedExercises] = useState(new Set());\n\n  // Función para obtener el inicio de la semana (lunes)\n  const getWeekStart = (date = new Date()) => {\n    const d = new Date(date);\n    const day = d.getDay();\n    const diff = d.getDate() - day + (day === 0 ? -6 : 1); // Ajustar para que lunes sea el inicio\n    const monday = new Date(d.setDate(diff));\n    monday.setHours(0, 0, 0, 0);\n    return monday.toISOString();\n  };\n\n  // Función para verificar si es una nueva semana\n  const isNewWeek = savedWeekStart => {\n    const currentWeekStart = getWeekStart();\n    return currentWeekStart !== savedWeekStart;\n  };\n\n  // Cargar ejercicios completados del localStorage al inicializar\n  useEffect(() => {\n    const saved = localStorage.getItem(\"completedExercises\");\n    const savedWeekStart = localStorage.getItem(\"exercisesWeekStart\");\n    try {\n      // Si es una nueva semana, reiniciar los ejercicios completados\n      if (!savedWeekStart || isNewWeek(savedWeekStart)) {\n        console.log('Nueva semana detectada, reiniciando ejercicios completados');\n        setCompletedExercises(new Set());\n        localStorage.setItem('exercisesWeekStart', getWeekStart());\n        localStorage.removeItem('completedExercises');\n        return;\n      }\n\n      // Cargar ejercicios completados si es la misma semana\n      if (saved) {\n        const parsedSet = new Set(JSON.parse(saved));\n        setCompletedExercises(parsedSet);\n      }\n    } catch (error) {\n      console.error(\"Error loading completed exercises:\", error);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Guardar en localStorage cuando cambie el estado\n  useEffect(() => {\n    if (completedExercises.size > 0) {\n      localStorage.setItem(\"completedExercises\", JSON.stringify(Array.from(completedExercises)));\n      localStorage.setItem('exercisesWeekStart', getWeekStart());\n    }\n  }, [completedExercises]);\n  const markExerciseCompleted = exerciseKey => {\n    setCompletedExercises(prev => new Set([...prev, exerciseKey]));\n  };\n  const markExerciseIncomplete = exerciseKey => {\n    setCompletedExercises(prev => {\n      const newSet = new Set(prev);\n      newSet.delete(exerciseKey);\n      return newSet;\n    });\n  };\n  const isExerciseCompleted = exerciseKey => {\n    return completedExercises.has(exerciseKey);\n  };\n  const clearAllCompleted = () => {\n    setCompletedExercises(new Set());\n    localStorage.removeItem('completedExercises');\n  };\n  const resetWeeklyProgress = () => {\n    setCompletedExercises(new Set());\n    localStorage.removeItem('completedExercises');\n    localStorage.setItem('exercisesWeekStart', getWeekStart());\n  };\n\n  // Generar una clave única para el ejercicio basada en día y nombre\n  const generateExerciseKey = (dia, ejercicioNombre) => {\n    return `${dia}-${ejercicioNombre}`;\n  };\n  return {\n    completedExercises,\n    markExerciseCompleted,\n    markExerciseIncomplete,\n    isExerciseCompleted,\n    clearAllCompleted,\n    resetWeeklyProgress,\n    generateExerciseKey\n  };\n};\n_s(useCompletedExercises, \"8SdVBm2v3Inii7KLlc7y/leYtSc=\");\nexport default useCompletedExercises;","map":{"version":3,"names":["useState","useEffect","useCompletedExercises","_s","completedExercises","setCompletedExercises","Set","getWeekStart","date","Date","d","day","getDay","diff","getDate","monday","setDate","setHours","toISOString","isNewWeek","savedWeekStart","currentWeekStart","saved","localStorage","getItem","console","log","setItem","removeItem","parsedSet","JSON","parse","error","size","stringify","Array","from","markExerciseCompleted","exerciseKey","prev","markExerciseIncomplete","newSet","delete","isExerciseCompleted","has","clearAllCompleted","resetWeeklyProgress","generateExerciseKey","dia","ejercicioNombre"],"sources":["C:/Users/zevet/OneDrive/Escritorio/zeveapp/src/hooks/useCompletedExercises.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst useCompletedExercises = () => {\r\n  const [completedExercises, setCompletedExercises] = useState(new Set());\r\n\r\n  // Función para obtener el inicio de la semana (lunes)\r\n  const getWeekStart = (date = new Date()) => {\r\n    const d = new Date(date);\r\n    const day = d.getDay();\r\n    const diff = d.getDate() - day + (day === 0 ? -6 : 1); // Ajustar para que lunes sea el inicio\r\n    const monday = new Date(d.setDate(diff));\r\n    monday.setHours(0, 0, 0, 0);\r\n    return monday.toISOString();\r\n  };\r\n\r\n  // Función para verificar si es una nueva semana\r\n  const isNewWeek = (savedWeekStart) => {\r\n    const currentWeekStart = getWeekStart();\r\n    return currentWeekStart !== savedWeekStart;\r\n  };\r\n\r\n  // Cargar ejercicios completados del localStorage al inicializar\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(\"completedExercises\");\r\n    const savedWeekStart = localStorage.getItem(\"exercisesWeekStart\");\r\n    \r\n    try {\r\n      // Si es una nueva semana, reiniciar los ejercicios completados\r\n      if (!savedWeekStart || isNewWeek(savedWeekStart)) {\r\n        console.log('Nueva semana detectada, reiniciando ejercicios completados');\r\n        setCompletedExercises(new Set());\r\n        localStorage.setItem('exercisesWeekStart', getWeekStart());\r\n        localStorage.removeItem('completedExercises');\r\n        return;\r\n      }\r\n\r\n      // Cargar ejercicios completados si es la misma semana\r\n      if (saved) {\r\n        const parsedSet = new Set(JSON.parse(saved));\r\n        setCompletedExercises(parsedSet);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error loading completed exercises:\", error);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Guardar en localStorage cuando cambie el estado\r\n  useEffect(() => {\r\n    if (completedExercises.size > 0) {\r\n      localStorage.setItem(\r\n        \"completedExercises\",\r\n        JSON.stringify(Array.from(completedExercises))\r\n      );\r\n      localStorage.setItem('exercisesWeekStart', getWeekStart());\r\n    }\r\n  }, [completedExercises]);\r\n\r\n  const markExerciseCompleted = (exerciseKey) => {\r\n    setCompletedExercises((prev) => new Set([...prev, exerciseKey]));\r\n  };\r\n\r\n  const markExerciseIncomplete = (exerciseKey) => {\r\n    setCompletedExercises((prev) => {\r\n      const newSet = new Set(prev);\r\n      newSet.delete(exerciseKey);\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const isExerciseCompleted = (exerciseKey) => {\r\n    return completedExercises.has(exerciseKey);\r\n  };\r\n\r\n  const clearAllCompleted = () => {\r\n    setCompletedExercises(new Set());\r\n    localStorage.removeItem('completedExercises');\r\n  };\r\n\r\n  const resetWeeklyProgress = () => {\r\n    setCompletedExercises(new Set());\r\n    localStorage.removeItem('completedExercises');\r\n    localStorage.setItem('exercisesWeekStart', getWeekStart());\r\n  };\r\n\r\n  // Generar una clave única para el ejercicio basada en día y nombre\r\n  const generateExerciseKey = (dia, ejercicioNombre) => {\r\n    return `${dia}-${ejercicioNombre}`;\r\n  };\r\n\r\n  return {\r\n    completedExercises,\r\n    markExerciseCompleted,\r\n    markExerciseIncomplete,\r\n    isExerciseCompleted,\r\n    clearAllCompleted,\r\n    resetWeeklyProgress,\r\n    generateExerciseKey,\r\n  };\r\n};\r\n\r\nexport default useCompletedExercises;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}