{"ast":null,"code":"import{useState,useEffect}from\"react\";const useCompletedExercises=()=>{const[completedExercises,setCompletedExercises]=useState(new Set());// Función para obtener el inicio de la semana (lunes)\nconst getWeekStart=function(){let date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date();const d=new Date(date);const day=d.getDay();const diff=d.getDate()-day+(day===0?-6:1);// Ajustar para que lunes sea el inicio\nconst monday=new Date(d.setDate(diff));monday.setHours(0,0,0,0);return monday.toISOString();};// Función para verificar si es una nueva semana\nconst isNewWeek=savedWeekStart=>{const currentWeekStart=getWeekStart();return currentWeekStart!==savedWeekStart;};// Cargar ejercicios completados del localStorage al inicializar\nuseEffect(()=>{const saved=localStorage.getItem(\"completedExercises\");const savedWeekStart=localStorage.getItem(\"exercisesWeekStart\");try{// Si es una nueva semana, reiniciar los ejercicios completados\nif(!savedWeekStart||isNewWeek(savedWeekStart)){console.log(\"Nueva semana detectada, reiniciando ejercicios completados\");setCompletedExercises(new Set());localStorage.setItem(\"exercisesWeekStart\",getWeekStart());localStorage.removeItem(\"completedExercises\");return;}// Cargar ejercicios completados si es la misma semana\nif(saved){const parsedSet=new Set(JSON.parse(saved));setCompletedExercises(parsedSet);}}catch(error){console.error(\"Error loading completed exercises:\",error);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// Guardar en localStorage cuando cambie el estado\nuseEffect(()=>{if(completedExercises.size>0){localStorage.setItem(\"completedExercises\",JSON.stringify(Array.from(completedExercises)));localStorage.setItem(\"exercisesWeekStart\",getWeekStart());}},[completedExercises]);const markExerciseCompleted=exerciseKey=>{setCompletedExercises(prev=>new Set([...prev,exerciseKey]));};const markExerciseIncomplete=exerciseKey=>{setCompletedExercises(prev=>{const newSet=new Set(prev);newSet.delete(exerciseKey);return newSet;});};const isExerciseCompleted=exerciseKey=>{return completedExercises.has(exerciseKey);};const clearAllCompleted=()=>{setCompletedExercises(new Set());localStorage.removeItem(\"completedExercises\");};const resetWeeklyProgress=()=>{setCompletedExercises(new Set());localStorage.removeItem(\"completedExercises\");localStorage.setItem(\"exercisesWeekStart\",getWeekStart());};// Generar una clave única para el ejercicio basada en día y nombre\nconst generateExerciseKey=(dia,ejercicioNombre)=>{return\"\".concat(dia,\"-\").concat(ejercicioNombre);};return{completedExercises,markExerciseCompleted,markExerciseIncomplete,isExerciseCompleted,clearAllCompleted,resetWeeklyProgress,generateExerciseKey};};export default useCompletedExercises;","map":{"version":3,"names":["useState","useEffect","useCompletedExercises","completedExercises","setCompletedExercises","Set","getWeekStart","date","arguments","length","undefined","Date","d","day","getDay","diff","getDate","monday","setDate","setHours","toISOString","isNewWeek","savedWeekStart","currentWeekStart","saved","localStorage","getItem","console","log","setItem","removeItem","parsedSet","JSON","parse","error","size","stringify","Array","from","markExerciseCompleted","exerciseKey","prev","markExerciseIncomplete","newSet","delete","isExerciseCompleted","has","clearAllCompleted","resetWeeklyProgress","generateExerciseKey","dia","ejercicioNombre","concat"],"sources":["C:/Users/zevet/OneDrive/Escritorio/zeveapp/src/hooks/useCompletedExercises.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst useCompletedExercises = () => {\r\n  const [completedExercises, setCompletedExercises] = useState(new Set());\r\n\r\n  // Función para obtener el inicio de la semana (lunes)\r\n  const getWeekStart = (date = new Date()) => {\r\n    const d = new Date(date);\r\n    const day = d.getDay();\r\n    const diff = d.getDate() - day + (day === 0 ? -6 : 1); // Ajustar para que lunes sea el inicio\r\n    const monday = new Date(d.setDate(diff));\r\n    monday.setHours(0, 0, 0, 0);\r\n    return monday.toISOString();\r\n  };\r\n\r\n  // Función para verificar si es una nueva semana\r\n  const isNewWeek = (savedWeekStart) => {\r\n    const currentWeekStart = getWeekStart();\r\n    return currentWeekStart !== savedWeekStart;\r\n  };\r\n\r\n  // Cargar ejercicios completados del localStorage al inicializar\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(\"completedExercises\");\r\n    const savedWeekStart = localStorage.getItem(\"exercisesWeekStart\");\r\n\r\n    try {\r\n      // Si es una nueva semana, reiniciar los ejercicios completados\r\n      if (!savedWeekStart || isNewWeek(savedWeekStart)) {\r\n        console.log(\r\n          \"Nueva semana detectada, reiniciando ejercicios completados\"\r\n        );\r\n        setCompletedExercises(new Set());\r\n        localStorage.setItem(\"exercisesWeekStart\", getWeekStart());\r\n        localStorage.removeItem(\"completedExercises\");\r\n        return;\r\n      }\r\n\r\n      // Cargar ejercicios completados si es la misma semana\r\n      if (saved) {\r\n        const parsedSet = new Set(JSON.parse(saved));\r\n        setCompletedExercises(parsedSet);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error loading completed exercises:\", error);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Guardar en localStorage cuando cambie el estado\r\n  useEffect(() => {\r\n    if (completedExercises.size > 0) {\r\n      localStorage.setItem(\r\n        \"completedExercises\",\r\n        JSON.stringify(Array.from(completedExercises))\r\n      );\r\n      localStorage.setItem(\"exercisesWeekStart\", getWeekStart());\r\n    }\r\n  }, [completedExercises]);\r\n\r\n  const markExerciseCompleted = (exerciseKey) => {\r\n    setCompletedExercises((prev) => new Set([...prev, exerciseKey]));\r\n  };\r\n\r\n  const markExerciseIncomplete = (exerciseKey) => {\r\n    setCompletedExercises((prev) => {\r\n      const newSet = new Set(prev);\r\n      newSet.delete(exerciseKey);\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const isExerciseCompleted = (exerciseKey) => {\r\n    return completedExercises.has(exerciseKey);\r\n  };\r\n\r\n  const clearAllCompleted = () => {\r\n    setCompletedExercises(new Set());\r\n    localStorage.removeItem(\"completedExercises\");\r\n  };\r\n\r\n  const resetWeeklyProgress = () => {\r\n    setCompletedExercises(new Set());\r\n    localStorage.removeItem(\"completedExercises\");\r\n    localStorage.setItem(\"exercisesWeekStart\", getWeekStart());\r\n  };\r\n\r\n  // Generar una clave única para el ejercicio basada en día y nombre\r\n  const generateExerciseKey = (dia, ejercicioNombre) => {\r\n    return `${dia}-${ejercicioNombre}`;\r\n  };\r\n\r\n  return {\r\n    completedExercises,\r\n    markExerciseCompleted,\r\n    markExerciseIncomplete,\r\n    isExerciseCompleted,\r\n    clearAllCompleted,\r\n    resetWeeklyProgress,\r\n    generateExerciseKey,\r\n  };\r\n};\r\n\r\nexport default useCompletedExercises;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}